/* Dark mode styles */

/* Apply dark mode when .dark-mode class is present on html */
html.dark-mode {
  /* Base color overrides */
  background-color: $dark-background;
  color: $dark-text-color;
  
  body {
    background-color: $dark-background;
    color: $dark-text-color;
  }
  
  /* Header styles */
  .site-header {
    background-color: $dark-surface;
    border-color: $dark-border-color;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    
    .site-title {
      color: $dark-text-color;
    }
  }
  
  /* Link colors */
  a {
    color: lighten($link-color, 15%);
    
    &:hover {
      color: lighten($link-color, 25%);
    }
  }
  
  /* Navigation */
  .site-nav {
    .page-link {
      color: $dark-text-color;
      
      &:hover {
        color: lighten($primary-color, 20%);
      }
    }
    
    @media (max-width: $on-palm) {
      background-color: $dark-surface;
      border-color: $dark-border-color;
      
      .menu-icon > svg {
        fill: $dark-text-color;
      }
    }
    
    /* Dark mode toggle */
    .theme-toggle {
      color: $dark-text-color;
      
      .sun {
        display: block;
      }
      
      .moon {
        display: none;
      }
    }
  }
  
  /* Footer */
  .site-footer {
    background-color: $dark-surface;
    border-color: $dark-border-color;
    
    .footer-links a, 
    .social-links a {
      color: $dark-text-color;
      
      &:hover {
        color: lighten($primary-color, 20%);
      }
    }
    
    .footer-bottom {
      border-color: $dark-border-color;
    }
  }
  
  /* Post content */
  .post {
    .post-header {
      .post-meta {
        color: darken($dark-text-color, 15%);
        
        .post-categories a {
          background-color: $dark-gray-light;
          
          &:hover {
            background-color: lighten($primary-color, 10%);
          }
        }
      }
    }
    
    .post-content {
      h1, h2, h3, h4, h5, h6 {
        color: $dark-text-color;
      }
    }
    
    .post-navigation {
      border-color: $dark-border-color;
      
      a {
        background-color: $dark-gray-light;
        
        &:hover {
          background-color: lighten($dark-gray-light, 10%);
        }
      }
    }
    
    .post-tags {
      border-color: $dark-border-color;
      
      .tag {
        background-color: $dark-gray-light;
        
        &:hover {
          background-color: lighten($primary-color, 10%);
        }
      }
    }
  }
  
  /* Table of contents */
  .table-of-contents {
    background-color: $dark-surface;
    border-color: $dark-border-color;
  }
  
  /* Code blocks */
  pre, code {
    background-color: $dark-code-background;
    color: #f8f8f2;
  }
  
  .code-filename {
    background-color: darken($dark-code-background, 5%);
    border-color: $dark-border-color;
    color: darken($dark-text-color, 10%);
  }
  
  .copy-code-button {
    background-color: $dark-gray-light;
    border-color: $dark-border-color;
    color: $dark-text-color;
    
    &:hover {
      background-color: lighten($dark-gray-light, 10%);
    }
  }
  
  /* Blockquotes */
  blockquote {
    background-color: $dark-surface;
    border-color: lighten($primary-color, 10%);
  }
  
  /* Tables */
  table {
    th, td {
      border-color: $dark-border-color;
    }
    
    th {
      background-color: $dark-gray-light;
    }
    
    tr:nth-child(even) {
      background-color: rgba($dark-gray-light, 0.3);
    }
  }
  
  /* Horizontal rules */
  hr {
    background-color: $dark-border-color;
  }
  
  /* Selection */
  ::selection {
    background: rgba(lighten($primary-color, 20%), 0.3);
    color: $dark-text-color;
  }
}

/* Transition for smooth mode switching */
body, a, .site-header, .site-nav, .site-footer, .post, 
.table-of-contents, pre, code, blockquote, table, button,
.post-navigation a, .tag, .theme-toggle {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}