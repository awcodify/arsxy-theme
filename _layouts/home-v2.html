---
layout: default
---

<div class="home-v2">
  <!-- Stories-style Category Navigation -->
  <section class="stories-section">
    <div class="stories-container">
      <div class="story-item active" data-category="all">
        <div class="story-avatar">
          <div class="avatar-ring">
            <img src="{{ '/assets/images/avatar.jpg' | relative_url }}" alt="All Categories" 
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
            <div class="story-placeholder" style="display: none;">
              <img src="{{ '/assets/images/icons/default-category.svg' | relative_url }}" 
                   alt="All Categories" 
                   style="width: 100%; height: 100%; object-fit: cover;" />
            </div>
          </div>
        </div>
        <span class="story-label">All</span>
      </div>
      
      {% assign categories_list = site.categories %}
      {% for category in categories_list limit:8 %}
        {% comment %}Find the most recent post with an image in this category{% endcomment %}
        {% assign category_posts = category[1] | where_exp: "post", "post.image" %}
        {% assign latest_post = category_posts | first %}
        
        <div class="story-item" data-category="{{ category[0] | slugify }}">
          <div class="story-avatar">
            <div class="avatar-ring">
              {% if latest_post.image %}
                <img src="{{ '/assets/images/' | append: latest_post.image | relative_url }}" 
                     alt="{{ category[0] }}" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
              {% else %}
                <img src="{{ '/assets/images/categories/' | append: category[0] | slugify | append: '.jpg' | relative_url }}" 
                     alt="{{ category[0] }}" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
              {% endif %}
              <div class="story-placeholder" style="display: none;">
                <img src="{{ '/assets/images/icons/default-category.svg' | relative_url }}" 
                     alt="{{ category[0] }} category" 
                     style="width: 100%; height: 100%; object-fit: cover;" />
              </div>
            </div>
          </div>
          <span class="story-label">{{ category[0] }}</span>
        </div>
      {% endfor %}
    </div>
  </section>

  <!-- Main Feed Container -->
  <div class="feed-container">
    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Filter and View Controls -->
      <div class="feed-controls">
        <div class="filter-tabs">
          <button class="filter-tab active" data-filter="all">All Posts</button>
          <button class="filter-tab" data-filter="featured">Featured</button>
        </div>
        <div class="view-toggles">
          <button class="view-toggle active" data-view="feed" title="Feed View">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
            </svg>
          </button>
          <button class="view-toggle" data-view="grid" title="Grid View">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Posts Feed -->
      <div class="posts-feed" id="posts-feed">
      {% assign posts_to_show = paginator.posts | default: site.posts %}
      {% for post in posts_to_show limit:15 %}
        <article class="post-card" 
                 data-categories="{% for cat in post.categories %}{{ cat | slugify }} {% endfor %}"
                 data-featured="{% if post.featured %}true{% else %}false{% endif %}"
                 data-post-id="{{ forloop.index }}">
          
          <!-- Post Header -->
          <div class="post-header">
            <div class="author-info">
              <div class="author-avatar">
                <img src="{{ post.author_avatar | default: '/assets/images/default-avatar.jpg' | relative_url }}" 
                     alt="{{ post.author | default: site.author }}"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                <div class="avatar-placeholder" style="display: none;">
                  {{ post.author | default: site.author | slice: 0 | upcase }}
                </div>
              </div>
              <div class="author-details">
                <span class="author-name">{{ post.author | default: site.author }}</span>
                <div class="post-meta">
                  <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%b %d, %Y" }}</time>
                  {% if post.reading_time %}
                    <span class="reading-time">{{ post.reading_time }} min read</span>
                  {% else %}
                    <span class="reading-time">{{ post.content | number_of_words | divided_by: 200 | plus: 1 }} min read</span>
                  {% endif %}
                  {% if post.categories.size > 0 %}
                    <span class="category">{{ post.categories.first }}</span>
                  {% endif %}
                </div>
              </div>
            </div>
            {% if post.featured %}
              <div class="featured-badge" title="Featured Post">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.46,13.97L5.82,21L12,17.27Z"/>
                </svg>
              </div>
            {% endif %}
          </div>

          <!-- Post Content -->
          <div class="post-content">
            <h2 class="post-title">
              <a href="{{ post.url | relative_url }}">{{ post.title | escape }}</a>
            </h2>
            
            <div class="post-excerpt">
              {{ post.excerpt | strip_html | truncatewords: 25 }}
            </div>

            {% if post.tags.size > 0 %}
              <div class="post-tags">
                {% for tag in post.tags limit:3 %}
                  <a href="{{ '/tags/#' | append: tag | slugify | relative_url }}" class="tag">#{{ tag }}</a>
                {% endfor %}
              </div>
            {% endif %}

            {% if post.image %}
              <div class="post-image">
                <a href="{{ post.url | relative_url }}">
                  <img src="{{ '/assets/images/' | append: post.image | relative_url }}" 
                       alt="{{ post.title }}" 
                       loading="{% if forloop.index <= 2 %}eager{% else %}lazy{% endif %}" />
                </a>
              </div>
            {% endif %}
          </div>

          <!-- Post Actions -->
          <div class="post-actions">
            <div class="action-buttons">
              <a href="{{ post.url | relative_url }}" class="action-btn read-btn" aria-label="Read post">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
                <span>Read Article</span>
              </a>

              <a href="{{ post.url | relative_url }}#giscus-comments" class="action-btn comment-btn" aria-label="View comments">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                <span>Comments</span>
              </a>

              <div class="share-dropdown">
                <button class="action-btn share-btn" aria-label="Share post">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                    <polyline points="16,6 12,2 8,6"/>
                    <line x1="12" y1="2" x2="12" y2="15"/>
                  </svg>
                  <span>Share</span>
                </button>
                <div class="share-menu">
                  <a href="https://twitter.com/intent/tweet?url={{ site.url }}{{ post.url }}&text={{ post.title | uri_escape }}" 
                     target="_blank" rel="noopener" class="share-option">Twitter</a>
                  <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ site.url }}{{ post.url }}" 
                     target="_blank" rel="noopener" class="share-option">LinkedIn</a>
                  <button onclick="navigator.clipboard.writeText('{{ site.url }}{{ post.url }}')" class="share-option">Copy Link</button>
                </div>
              </div>
            </div>

            <div class="post-meta-info">
              <span class="reading-time">
                {% if post.reading_time %}
                  {{ post.reading_time }} min read
                {% else %}
                  {{ post.content | number_of_words | divided_by: 200 | plus: 1 }} min read
                {% endif %}
              </span>
              <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%b %d" }}</time>
            </div>
          </div>
        </article>
      {% endfor %}
      </div>

      <!-- Load More Button -->
      <div class="load-more-container">
        <button class="load-more-btn" id="loadMoreBtn">
          <span class="load-text">Load More Posts</span>
          <svg class="load-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="8,12 12,16 16,12"/>
          </svg>
        </button>
      </div>
    </main>

    <!-- Sidebar -->
    <aside class="social-sidebar">
    <!-- Profile Card -->
    <div class="profile-card">
      <div class="profile-avatar">
        <img src="{{ site.author_avatar | default: '/assets/images/author.jpg' | relative_url }}" 
             alt="{{ site.author | default: site.title }}"
             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
        <div class="avatar-placeholder" style="display: none;">
          {{ site.author | default: site.title | slice: 0 | upcase }}
        </div>
      </div>
      <div class="profile-info">
        <h3 class="profile-name">{{ site.author | default: site.title }}</h3>
        <p class="profile-bio">{{ site.description | truncatewords: 15 }}</p>
        <div class="profile-stats">
          <div class="stat">
            <span class="stat-number">{{ site.posts.size }}</span>
            <span class="stat-label">Posts</span>
          </div>
          <div class="stat">
            <span class="stat-number">{{ site.categories.size }}</span>
            <span class="stat-label">Topics</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Trending Topics -->
    <div class="sidebar-widget trending-widget">
      <h3 class="widget-title">Trending Topics</h3>
      <div class="trending-list">
        {% assign category_counter = 0 %}
        {% for category in site.categories limit:5 %}
          {% assign category_counter = category_counter | plus: 1 %}
          <a href="{{ '/categories/#' | append: category[0] | slugify | relative_url }}" class="trending-item">
            <span class="trending-number">{{ category_counter }}</span>
            <span class="trending-name">{{ category[0] }}</span>
            <span class="trending-count">{{ category[1].size }} posts</span>
          </a>
        {% endfor %}
      </div>
    </div>

    <!-- Suggested Categories -->
    <div class="sidebar-widget categories-widget">
      <h3 class="widget-title">Explore Categories</h3>
      <div class="categories-grid">
        {% for category in site.categories limit:6 %}
          <a href="{{ '/categories/#' | append: category[0] | slugify | relative_url }}" class="category-chip">
            <span class="category-name">{{ category[0] }}</span>
            <span class="category-count">{{ category[1].size }}</span>
          </a>
        {% endfor %}
      </div>
    </div>

    <!-- Quick Links -->
    <div class="sidebar-widget quick-links-widget">
      <h3 class="widget-title">Quick Links</h3>
      <ul class="quick-links">
        <li><a href="{{ '/about/' | relative_url }}">About</a></li>
        <li><a href="{{ '/contact/' | relative_url }}">Contact</a></li>
        <li><a href="{{ '/search/' | relative_url }}">Search</a></li>
        <li><a href="{{ '/feed.xml' | relative_url }}">RSS Feed</a></li>
      </ul>
    </div>
    </aside>
  </div>
</div>
